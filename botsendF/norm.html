<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Help</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="../style.css" rel="stylesheet" />
</head>
<body>
    <h1>Norm</h1>
    <p>This bot posts to the #general channel</p>
    <input style="margin: 5px;" placeholder="Username" id="use" />
    <input style="margin: 5px;" placeholder="message" id="mess" />
    <button style="margin: 5px;" onclick="hello()" title="send" class="btn btn-primary" >Send</button>
    <script>
        function hello() {
    var inputName = document.getElementById('use').value;
    var inputMess = document.getElementById('mess').value;
    var messsage = "**" + inputName + ":** " + inputMess

    if (inputName != "" && inputMess != ""){
        const webhookURL = "https://discord.com/api/webhooks/1353751263392563310/e0qskLQXNXlz6eWrP6cXiDwWrvttzw5OtsZEcBmno16R5hMJNTtT6pdY_6J0SwChZAEg";
        const message = messsage;
        const data = {
          content: message
        };

        fetch(webhookURL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
        .then(response => {
          console.log("Message sent to Discord!", response);
          window.location.reload();
        })
        .catch(error => {
          console.error("Error sending message:", error);
          window.location.reload();
        });
    // reload the current page

}else{
            alert("cannot send null");
        }
}
    </script>
</body>
</html>